---
import Link from "./ui/link.astro";
---

<div
  class="bg-black p-8 md:px-20 md:py-20 mt-20 mx-auto max-w-5xl rounded-lg flex flex-col items-center text-center">
  <h2 class="text-white text-4xl md:text-6xl tracking-tight">
    No Advertisements <br /> No promotions
  </h2>
  <p class="text-slate-400 mt-4 text-lg md:text-xl">We hate ads as much as you do.</p>
  <p class="text-slate-400 mt-4 text-lg md:text-xl">
    But, we have servers to run. If you like our work, please consider supporting us.
  </p>
  <div class="flex gap-3 justify-center p-4">
    <img class="h-10 rounded" src="/media/esewa.webp" alt="esewa logo" />
    <img class="h-10 rounded" src="/media/khalti.jpg" alt="khalti logo" />
  </div>
  <div class="flex">
    <button
      class="rounded text-center transition focus-visible:ring-2 ring-offset-2 ring-gray-200 px-5 py-2.5 bg-white text-black border-2 border-transparent">
      9823404657
    </button>
  </div>
  <script>
    let deferredPrompt: any;

    // Check if the PWA can be installed
    window.addEventListener("beforeinstallprompt", (event) => {
      event.preventDefault();
      deferredPrompt = event;
      document.querySelector("#installButton")?.removeAttribute("disabled");
    });

    // Handle button click event
    document.querySelector("#installButton")?.addEventListener("click", () => {
      if (deferredPrompt) {
        // Show the installation prompt
        deferredPrompt.prompt();

        // Wait for the user to respond to the prompt
        deferredPrompt.userChoice.then((choiceResult: any) => {
          choiceResult.outcome === "accepted"
            ? console.log("PWA installed")
            : console.log("PWA installation canceled");
          // Reset the deferred prompt
          deferredPrompt = null;
        });
      }
    });
  </script>
</div>
